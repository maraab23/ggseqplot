<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Sequence Index Plot — ggseqiplot • ggseqplot</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/Roboto_Condensed-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sequence Index Plot — ggseqiplot"><meta name="description" content="Function for rendering sequence index plots with
ggplot2 (Wickham 2016)
 instead
of base R's plot function that is used by
TraMineR::seqplot
(Gabadinho et al. 2011)
."><meta property="og:description" content="Function for rendering sequence index plots with
ggplot2 (Wickham 2016)
 instead
of base R's plot function that is used by
TraMineR::seqplot
(Gabadinho et al. 2011)
."><meta property="og:image" content="https://maraab23.github.io/ggseqplot/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggseqplot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ggseqplot.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/maraab23/ggseqplot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Sequence Index Plot</h1>
      <small class="dont-index">Source: <a href="https://github.com/maraab23/ggseqplot/blob/main/R/ggseqiplot.R" class="external-link"><code>R/ggseqiplot.R</code></a></small>
      <div class="d-none name"><code>ggseqiplot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function for rendering sequence index plots with
<code><a href="https://ggplot2.tidyverse.org/reference/ggplot2-package.html" class="external-link">ggplot2</a></code> (Wickham 2016)
 instead
of base R's <code><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></code> function that is used by
<code><a href="https://rdrr.io/pkg/TraMineR/man/seqplot.html" class="external-link">TraMineR::seqplot</a></code>
(Gabadinho et al. 2011)
.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ggseqiplot</span><span class="op">(</span></span>
<span>  <span class="va">seqdata</span>,</span>
<span>  no.n <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sortv <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  border <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  facet_scale <span class="op">=</span> <span class="st">"free_y"</span>,</span>
<span>  facet_ncol <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  facet_nrow <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-seqdata">seqdata<a class="anchor" aria-label="anchor" href="#arg-seqdata"></a></dt>
<dd><p>State sequence object (class <code>stslist</code>) created with the <code><a href="https://rdrr.io/pkg/TraMineR/man/seqdef.html" class="external-link">TraMineR::seqdef</a></code> function.</p></dd>


<dt id="arg-no-n">no.n<a class="anchor" aria-label="anchor" href="#arg-no-n"></a></dt>
<dd><p>specifies if number of (weighted) sequences is shown as part of
the y-axis title or group/facet title (default is <code>TRUE</code>)</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>A vector of the same length as the sequence data indicating group membership. When not NULL, a distinct plot is generated for each level of group.</p></dd>


<dt id="arg-sortv">sortv<a class="anchor" aria-label="anchor" href="#arg-sortv"></a></dt>
<dd><p>Vector of numerical values sorting the sequences or a sorting
method (either <code>"from.start"</code> or <code>"from.end"</code>). See details.</p></dd>


<dt id="arg-weighted">weighted<a class="anchor" aria-label="anchor" href="#arg-weighted"></a></dt>
<dd><p>Controls if weights (specified in <code><a href="https://rdrr.io/pkg/TraMineR/man/seqdef.html" class="external-link">TraMineR::seqdef</a></code>) should be used. Default is <code>TRUE</code>, i.e. if available weights are used</p></dd>


<dt id="arg-border">border<a class="anchor" aria-label="anchor" href="#arg-border"></a></dt>
<dd><p>if <code>TRUE</code> bars are plotted with black outline; default is <code>FALSE</code> (also accepts <code>NULL</code>)</p></dd>


<dt id="arg-facet-scale">facet_scale<a class="anchor" aria-label="anchor" href="#arg-facet-scale"></a></dt>
<dd><p>Specifies if y-scale in faceted plot should be free
(<code>"free_y"</code> is default) or <code>"fixed"</code></p></dd>


<dt id="arg-facet-ncol">facet_ncol<a class="anchor" aria-label="anchor" href="#arg-facet-ncol"></a></dt>
<dd><p>Number of columns in faceted (i.e. grouped) plot</p></dd>


<dt id="arg-facet-nrow">facet_nrow<a class="anchor" aria-label="anchor" href="#arg-facet-nrow"></a></dt>
<dd><p>Number of rows in faceted (i.e. grouped) plot</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>if group is specified additional arguments of <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">ggplot2::facet_wrap</a></code>
such as <code>"labeller"</code> or <code>"strip.position"</code> can be used to change the appearance of the plot</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A sequence index plot. If stored as object the resulting list object
also contains the data (spell format) used for rendering the plot.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Sequence index plots have been introduced by
Scherer (2001)
 and display each sequence as
horizontally stacked bar or line. For a more detailed discussion of this
type of sequence visualization see, for example,
Brzinsky-Fay (2014)
,
Fasang and Liao (2014)
,
and Raab and Struffolino (2022)
.</p>
<p>The function uses <code><a href="https://rdrr.io/pkg/TraMineR/man/seqformat.html" class="external-link">TraMineR::seqformat</a></code>
to reshape <code>seqdata</code> stored in wide format into a spell/episode format.
Then the data are further reshaped into the long format, i.e. for
every sequence each row in the data represents one specific sequence
position. For example, if we have 5 sequences of length 10, the long file
will have 50 rows. In the case of sequences of unequal length not every
sequence will contribute the same number of rows to the long data.</p>
<p>The reshaped data are used as input for rendering the index plot using
ggplot2's <code><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_rect</a></code>. <code>ggseqiplot</code> uses
<code><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_rect</a></code> instead of <code><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_tile</a></code>
because this allows for a straight forward implementation of weights.
If weights are specified for <code>seqdata</code> and <code>weighted=TRUE</code>
the sequence height corresponds to its weight.</p>
<p>If weights and a grouping variable are used, and <code>facet_scale="fixed"</code>
the values of the y-axis are not labeled, because
<code><a href="https://ggplot2.tidyverse.org/reference/ggplot2-package.html" class="external-link">ggplot2</a></code> reasonably does not allow for varying scales
when the facet scale is fixed.</p>
<p>When a <code>sortv</code> is specified, the sequences are arranged in the order of
its values. With <code>sortv="from.start"</code> sequence data are sorted
according to the states of the alphabet in ascending order starting with the
first sequence position, drawing on succeeding positions in the case of
ties. Likewise, <code>sortv="from.end"</code> sorts a reversed version of the
sequence data, starting with the final sequence position turning to
preceding positions in case of ties.</p>
<p>Note that the default aspect ratio of <code>ggseqiplot</code> is different from
<code><a href="https://rdrr.io/pkg/TraMineR/man/seqplot.html" class="external-link">TraMineR::seqIplot</a></code>. This is most obvious
when <code>border=TRUE</code>. You can change the ratio either by adding code to
<code>ggseqiplot</code> or by specifying the ratio when saving the code with
<code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Brzinsky-Fay C (2014).
“Graphical Representation of Transitions and Sequences.”
In Blanchard P, Bühlmann F, Gauthier J (eds.), <em>Advances in Sequence Analysis: Theory, Method, Applications</em>,  Life Course Research and Social Policies, 265–284.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-04969-4_14" class="external-link">doi:10.1007/978-3-319-04969-4_14</a>
.<br><br> Fasang AE, Liao TF (2014).
“Visualizing Sequences in the Social Sciences: Relative Frequency Sequence Plots.”
<em>Sociological Methods &amp; Research</em>, <b>43</b>(4), 643–676.
<a href="https://doi.org/10.1177/0049124113506563" class="external-link">doi:10.1177/0049124113506563</a>
.<br><br> Gabadinho A, Ritschard G, Müller NS, Studer M (2011).
“Analyzing and Visualizing State Sequences in R with TraMineR.”
<em>Journal of Statistical Software</em>, <b>40</b>(4), 1–37.
<a href="https://doi.org/10.18637/jss.v040.i04" class="external-link">doi:10.18637/jss.v040.i04</a>
.<br><br> Raab M, Struffolino E (2022).
<em>Sequence Analysis</em>, volume 190 of <em>Quantitative Applications in the Social Sciences</em>.
SAGE, Thousand Oaks, CA.
<a href="https://sa-book.github.io/" class="external-link">https://sa-book.github.io/</a>.<br><br> Scherer S (2001).
“Early Career Patterns: A Comparison of Great Britain and West Germany.”
<em>European Sociological Review</em>, <b>17</b>(2), 119–144.
<a href="https://doi.org/10.1093/esr/17.2.119" class="external-link">doi:10.1093/esr/17.2.119</a>
.<br><br> Wickham H (2016).
<em>ggplot2: Elegant Graphics for Data Analysis</em>,  Use R!, 2nd ed. edition.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-24277-4" class="external-link">doi:10.1007/978-3-319-24277-4</a>
.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Marcel Raab</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Use example data from TraMineR: actcal data set</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">actcal</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We use only a sample of 300 cases</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">actcal</span> <span class="op">&lt;-</span> <span class="va">actcal</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">actcal</span><span class="op">)</span>, <span class="fl">300</span><span class="op">)</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">actcal.lab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"&gt; 37 hours"</span>, <span class="st">"19-36 hours"</span>, <span class="st">"1-18 hours"</span>, <span class="st">"no work"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">actcal.seq</span> <span class="op">&lt;-</span> <span class="fu">seqdef</span><span class="op">(</span><span class="va">actcal</span>, <span class="fl">13</span><span class="op">:</span><span class="fl">24</span>, labels <span class="op">=</span> <span class="va">actcal.lab</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] 4 distinct states appear in the data: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      1 = A</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      2 = B</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      3 = C</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      4 = D</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] state coding:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>        [alphabet]  [label]  [long label] </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      1  A           A        &gt; 37 hours</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      2  B           B        19-36 hours</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      3  C           C        1-18 hours</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      4  D           D        no work</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] 300 sequences in the data set</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] min/max sequence length: 12/12</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ex1 using weights</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ex1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ex1.seq</span> <span class="op">&lt;-</span> <span class="fu">seqdef</span><span class="op">(</span><span class="va">ex1</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">13</span>, weights <span class="op">=</span> <span class="va">ex1</span><span class="op">$</span><span class="va">weights</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] found missing values ('NA') in sequence data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] preparing 7 sequences</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] coding void elements with '%' and missing values with '*'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [!!] 1 empty sequence(s) with index: 7</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>       may produce inconsistent results.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] 4 distinct states appear in the data: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      1 = A</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      2 = B</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      3 = C</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      4 = D</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] state coding:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>        [alphabet]  [label]  [long label] </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      1  A           A        A</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      2  B           B        B</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      3  C           C        C</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      4  D           D        D</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] sum of weights: 60 - min/max: 0/29.3</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] 7 sequences in the data set</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] min/max sequence length: 0/13</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sequences sorted by age in 2000 and grouped by sex</span></span></span>
<span class="r-in"><span><span class="co"># with TraMineR::seqplot</span></span></span>
<span class="r-in"><span><span class="fu">seqIplot</span><span class="op">(</span><span class="va">actcal.seq</span>, group <span class="op">=</span> <span class="va">actcal</span><span class="op">$</span><span class="va">sex</span>, sortv <span class="op">=</span> <span class="va">actcal</span><span class="op">$</span><span class="va">age00</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggseqiplot-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># with ggseqplot</span></span></span>
<span class="r-in"><span><span class="fu">ggseqiplot</span><span class="op">(</span><span class="va">actcal.seq</span>, group <span class="op">=</span> <span class="va">actcal</span><span class="op">$</span><span class="va">sex</span>, sortv <span class="op">=</span> <span class="va">actcal</span><span class="op">$</span><span class="va">age00</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggseqiplot-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sequences of unequal length with missing state, and weights</span></span></span>
<span class="r-in"><span><span class="fu">seqIplot</span><span class="op">(</span><span class="va">ex1.seq</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggseqiplot-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">ggseqiplot</span><span class="op">(</span><span class="va">ex1.seq</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggseqiplot-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ... turn weights off and add border</span></span></span>
<span class="r-in"><span><span class="fu">seqIplot</span><span class="op">(</span><span class="va">ex1.seq</span>, weighted <span class="op">=</span> <span class="cn">FALSE</span>, border <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggseqiplot-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">ggseqiplot</span><span class="op">(</span><span class="va">ex1.seq</span>, weighted <span class="op">=</span> <span class="cn">FALSE</span>, border <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggseqiplot-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://marcelraab.de" class="external-link">Marcel Raab</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

