<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Sequence Transition Rate Plot — ggseqtrplot • ggseqplot</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/Roboto_Condensed-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sequence Transition Rate Plot — ggseqtrplot"><meta name="description" content="Function for plotting transition rate matrix of sequence states internally
computed by TraMineR::seqtrate (Gabadinho et al. 2011)
.
Plot is generated using ggplot2 (Wickham 2016)
."><meta property="og:description" content="Function for plotting transition rate matrix of sequence states internally
computed by TraMineR::seqtrate (Gabadinho et al. 2011)
.
Plot is generated using ggplot2 (Wickham 2016)
."><meta property="og:image" content="https://maraab23.github.io/ggseqplot/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggseqplot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.7.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ggseqplot.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/maraab23/ggseqplot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Sequence Transition Rate Plot</h1>
      <small class="dont-index">Source: <a href="https://github.com/maraab23/ggseqplot/blob/main/R/ggseqtrplot.R" class="external-link"><code>R/ggseqtrplot.R</code></a></small>
      <div class="d-none name"><code>ggseqtrplot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function for plotting transition rate matrix of sequence states internally
computed by <code><a href="https://rdrr.io/pkg/TraMineR/man/seqtrate.html" class="external-link">TraMineR::seqtrate</a></code> (Gabadinho et al. 2011)
.
Plot is generated using <code><a href="https://ggplot2.tidyverse.org/reference/ggplot2-package.html" class="external-link">ggplot2</a></code> (Wickham 2016)
.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ggseqtrplot</span><span class="op">(</span></span>
<span>  <span class="va">seqdata</span>,</span>
<span>  dss <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  no.n <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  with.missing <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  labsize <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  axislabs <span class="op">=</span> <span class="st">"labels"</span>,</span>
<span>  x_n.dodge <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  facet_ncol <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  facet_nrow <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-seqdata">seqdata<a class="anchor" aria-label="anchor" href="#arg-seqdata"></a></dt>
<dd><p>State sequence object (class <code>stslist</code>) created with the <code><a href="https://rdrr.io/pkg/TraMineR/man/seqdef.html" class="external-link">TraMineR::seqdef</a></code> function.</p></dd>


<dt id="arg-dss">dss<a class="anchor" aria-label="anchor" href="#arg-dss"></a></dt>
<dd><p>specifies if transition rates are computed for STS or DSS (default) sequences</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>A vector of the same length as the sequence data indicating group membership. When not NULL, a distinct plot is generated for each level of group.</p></dd>


<dt id="arg-no-n">no.n<a class="anchor" aria-label="anchor" href="#arg-no-n"></a></dt>
<dd><p>specifies if number of (weighted) sequences is shown in grouped (faceted) graph</p></dd>


<dt id="arg-weighted">weighted<a class="anchor" aria-label="anchor" href="#arg-weighted"></a></dt>
<dd><p>Controls if weights (specified in <code><a href="https://rdrr.io/pkg/TraMineR/man/seqdef.html" class="external-link">TraMineR::seqdef</a></code>) should be used. Default is <code>TRUE</code>, i.e. if available weights are used</p></dd>


<dt id="arg-with-missing">with.missing<a class="anchor" aria-label="anchor" href="#arg-with-missing"></a></dt>
<dd><p>Specifies if missing state should be considered when computing the transition rates (default is <code>FALSE</code>).</p></dd>


<dt id="arg-labsize">labsize<a class="anchor" aria-label="anchor" href="#arg-labsize"></a></dt>
<dd><p>Specifies the font size of the labels within the tiles (if not specified ggplot2's default is used)</p></dd>


<dt id="arg-axislabs">axislabs<a class="anchor" aria-label="anchor" href="#arg-axislabs"></a></dt>
<dd><p>specifies if sequence object's long "labels" (default) or the state names from its "alphabet" attribute should be used.</p></dd>


<dt id="arg-x-n-dodge">x_n.dodge<a class="anchor" aria-label="anchor" href="#arg-x-n-dodge"></a></dt>
<dd><p>allows to print the labels of the x-axis in multiple rows to avoid overlapping.</p></dd>


<dt id="arg-facet-ncol">facet_ncol<a class="anchor" aria-label="anchor" href="#arg-facet-ncol"></a></dt>
<dd><p>Number of columns in faceted (i.e. grouped) plot</p></dd>


<dt id="arg-facet-nrow">facet_nrow<a class="anchor" aria-label="anchor" href="#arg-facet-nrow"></a></dt>
<dd><p>Number of rows in faceted (i.e. grouped) plot</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tile plot of transition rates.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The transition rates are obtained by an internal call of
<code><a href="https://rdrr.io/pkg/TraMineR/man/seqtrate.html" class="external-link">TraMineR::seqtrate</a></code>.
This requires that the input data (<code>seqdata</code>)
are stored as state sequence object (class <code>stslist</code>) created with
the <code><a href="https://rdrr.io/pkg/TraMineR/man/seqdef.html" class="external-link">TraMineR::seqdef</a></code> function.
As STS based transition rates tend to be dominated by high values on the diagonal, it might be
worthwhile to examine DSS sequences instead (<code>dss = TRUE</code>)). In this case the resulting
plot shows the transition rates between episodes of distinct states.</p>
<p>In any case (DSS or STS) the transitions rates are reshaped into a a long data format
to enable plotting with <code><a href="https://ggplot2.tidyverse.org/reference/ggplot2-package.html" class="external-link">ggplot2</a></code>. The resulting output then is
prepared to be plotted with  <code><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">ggplot2::geom_tile</a></code>.
The data and specifications used for rendering the plot can be obtained by storing the
plot as an object. The appearance of the plot can be adjusted just like with
every other ggplot (e.g., by changing the theme or the scale using <code>+</code> and
the respective functions).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Gabadinho A, Ritschard G, Müller NS, Studer M (2011).
“Analyzing and Visualizing State Sequences in R with TraMineR.”
<em>Journal of Statistical Software</em>, <b>40</b>(4), 1–37.
<a href="https://doi.org/10.18637/jss.v040.i04" class="external-link">doi:10.18637/jss.v040.i04</a>
.<br><br> Wickham H (2016).
<em>ggplot2: Elegant Graphics for Data Analysis</em>,  Use R!, 2nd ed. edition.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-24277-4" class="external-link">doi:10.1007/978-3-319-24277-4</a>
.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Marcel Raab</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Use example data from TraMineR: biofam data set</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">biofam</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We use only a sample of 300 cases</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">biofam</span> <span class="op">&lt;-</span> <span class="va">biofam</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">biofam</span><span class="op">)</span>,<span class="fl">300</span><span class="op">)</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">biofam.lab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Parent"</span>, <span class="st">"Left"</span>, <span class="st">"Married"</span>, <span class="st">"Left+Marr"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"Child"</span>, <span class="st">"Left+Child"</span>, <span class="st">"Left+Marr+Child"</span>, <span class="st">"Divorced"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">biofam.seq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/TraMineR/man/seqdef.html" class="external-link">seqdef</a></span><span class="op">(</span><span class="va">biofam</span>, <span class="fl">10</span><span class="op">:</span><span class="fl">25</span>, labels<span class="op">=</span><span class="va">biofam.lab</span>, weights <span class="op">=</span> <span class="va">biofam</span><span class="op">$</span><span class="va">wp00tbgs</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] 8 distinct states appear in the data: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      1 = 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      2 = 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      3 = 2</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      4 = 3</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      5 = 4</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      6 = 5</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      7 = 6</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      8 = 7</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] state coding:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>        [alphabet]  [label]  [long label] </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      1  0           0        Parent</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      2  1           1        Left</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      3  2           2        Married</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      4  3           3        Left+Marr</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      5  4           4        Child</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      6  5           5        Left+Child</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      7  6           6        Left+Marr+Child</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      8  7           7        Divorced</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] sum of weights: 330.07 - min/max: 0/6.02881860733032</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] 300 sequences in the data set</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] min/max sequence length: 16/16</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Basic transition rate plot (with adjusted x-axis labels)</span></span></span>
<span class="r-in"><span><span class="fu">ggseqtrplot</span><span class="op">(</span><span class="va">biofam.seq</span>, x_n.dodge <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] computing transition probabilities for states 0/1/2/3/4/5/6/7 ...</span>
<span class="r-plt img"><img src="ggseqtrplot-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Transition rate with group variable (with and without weights)</span></span></span>
<span class="r-in"><span><span class="fu">ggseqtrplot</span><span class="op">(</span><span class="va">biofam.seq</span>, group<span class="op">=</span><span class="va">biofam</span><span class="op">$</span><span class="va">sex</span>, x_n.dodge <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] computing transition probabilities for states 0/1/2/3/4/5/6/7 ...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] computing transition probabilities for states 0/1/2/3/4/5/6/7 ...</span>
<span class="r-plt img"><img src="ggseqtrplot-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">ggseqtrplot</span><span class="op">(</span><span class="va">biofam.seq</span>, group<span class="op">=</span><span class="va">biofam</span><span class="op">$</span><span class="va">sex</span>, x_n.dodge <span class="op">=</span> <span class="fl">2</span>, weighted <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] computing transition probabilities for states 0/1/2/3/4/5/6/7 ...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  [&gt;] computing transition probabilities for states 0/1/2/3/4/5/6/7 ...</span>
<span class="r-plt img"><img src="ggseqtrplot-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://marcelraab.de" class="external-link">Marcel Raab</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

